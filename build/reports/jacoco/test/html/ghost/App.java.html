<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>App.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Milestone</a> &gt; <a href="index.source.html" class="el_package">ghost</a> &gt; <span class="el_source">App.java</span></div><h1>App.java</h1><pre class="source lang-java linenums">package ghost;

import processing.core.PApplet;
import processing.core.PImage;
import processing.core.PFont;

public class App extends PApplet {
    /**
    * Creates an applet instance.
    */
    public static final int WIDTH = 448;
    public static final int HEIGHT = 576;
    private Settings settings;
    private Player player;
    private int playerX;
    private int playerY;
    private Ghost ambusher;
    private Ghost chaser;
    private Ghost ignorant;
    private Ghost whim;
    private int ambusherX;
    private int ambusherY;
    private int chaserX;
    private int chaserY;
    private int ignorantX;
    private int ignorantY;
    private int whimX;
    private int whimY;
    private PFont font;
    private int debug;
    private boolean gameOver;
    private boolean win;
    private int count;
<span class="fc" id="L34">    public App() {</span>
<span class="fc" id="L35">        this.playerX = 0;</span>
<span class="fc" id="L36">        this.playerY = 0;</span>
<span class="fc" id="L37">        this.player = player;</span>
<span class="fc" id="L38">        this.ambusher = ambusher;</span>
<span class="fc" id="L39">        this.ambusherX = 0;</span>
<span class="fc" id="L40">        this.ambusherY = 0;</span>
<span class="fc" id="L41">        this.chaser = chaser;</span>
<span class="fc" id="L42">        this.chaserX = 0;</span>
<span class="fc" id="L43">        this.chaserY = 0;</span>
<span class="fc" id="L44">        this.ignorant = ignorant;</span>
<span class="fc" id="L45">        this.ignorantX = 0;</span>
<span class="fc" id="L46">        this.ignorantY = 0;</span>
<span class="fc" id="L47">        this.whim = whim;</span>
<span class="fc" id="L48">        this.whimX = 0;</span>
<span class="fc" id="L49">        this.whimY = 0;</span>
<span class="fc" id="L50">        this.font = font;</span>
<span class="fc" id="L51">        this.debug = 0;</span>
<span class="fc" id="L52">        this.gameOver = false;</span>
<span class="fc" id="L53">        this.win = false;</span>
<span class="fc" id="L54">        this.count = 0;</span>
<span class="fc" id="L55">    }</span>

    public void setup() {
<span class="fc" id="L58">        frameRate(60);</span>
<span class="nc" id="L59">        setSettings();</span>
<span class="nc" id="L60">        setPlayer();</span>
<span class="nc" id="L61">        setGhosts();</span>
<span class="nc" id="L62">    }</span>


    public void setPlayer(){
<span class="nc" id="L66">      this.playerX = this.settings.getPlayerX();</span>
<span class="nc" id="L67">      this.playerY = this.settings.getPlayerY();</span>
<span class="nc" id="L68">      this.player = new Player(loadImage(&quot;src/main/resources/playerClosed.png&quot;), 16*this.playerX, 16*this.playerY, this.settings.getSpeed());</span>
<span class="nc" id="L69">      this.player.setSprites(loadImage(&quot;src/main/resources/playerUp.png&quot;), loadImage(&quot;src/main/resources/playerDown.png&quot;), loadImage(&quot;src/main/resources/playerLeft.png&quot;), loadImage(&quot;src/main/resources/playerRight.png&quot;));</span>
<span class="nc" id="L70">      this.player.setSettings(this.settings);</span>
<span class="nc" id="L71">    }</span>

    public void setSettings(){
<span class="fc" id="L74">      this.settings = new Settings(this);</span>
<span class="fc" id="L75">      this.settings.configReader();</span>
<span class="fc" id="L76">      this.settings.mapReader();</span>
<span class="nc" id="L77">      this.settings.mapCell(this);</span>
<span class="nc" id="L78">    }</span>

    public void setGhosts(){
<span class="nc" id="L81">      this.ambusherX = this.settings.getaX();</span>
<span class="nc" id="L82">      this.ambusherY = this.settings.getaY();</span>
<span class="nc" id="L83">      this.chaserX = this.settings.getcX();</span>
<span class="nc" id="L84">      this.chaserY = this.settings.getcY();</span>
<span class="nc" id="L85">      this.ignorantX = this.settings.getiX();</span>
<span class="nc" id="L86">      this.ignorantY = this.settings.getiY();</span>
<span class="nc" id="L87">      this.whimX = this.settings.getwX();</span>
<span class="nc" id="L88">      this.whimY = this.settings.getwY();</span>
<span class="nc" id="L89">      this.ambusher = new Ghost(loadImage(&quot;src/main/resources/ambusher.png&quot;),16*this.ambusherX, 16*this.ambusherY, this.settings.getSpeed(), GhostType.AMBUSHER, this.settings);</span>
<span class="nc" id="L90">      this.chaser = new Ghost(loadImage(&quot;src/main/resources/chaser.png&quot;),16*this.chaserX, 16*this.chaserY, this.settings.getSpeed(),GhostType.CHASER, this.settings);</span>
<span class="nc" id="L91">      this.ignorant = new Ghost(loadImage(&quot;src/main/resources/ignorant.png&quot;),16*this.ignorantX, 16*this.ignorantY, this.settings.getSpeed(), GhostType.IGNORANT, this.settings);</span>
<span class="nc" id="L92">      this.whim = new Ghost(loadImage(&quot;src/main/resources/whim.png&quot;),16*this.whimX, 16*this.whimY, this.settings.getSpeed(), GhostType.WHIM, this.settings);</span>
<span class="nc" id="L93">      this.ambusher.setSprites(loadImage(&quot;src/main/resources/frightened.png&quot;));</span>
<span class="nc" id="L94">      this.chaser.setSprites(loadImage(&quot;src/main/resources/frightened.png&quot;));</span>
<span class="nc" id="L95">      this.whim.setSprites(loadImage(&quot;src/main/resources/frightened.png&quot;));</span>
<span class="nc" id="L96">      this.ignorant.setSprites(loadImage(&quot;src/main/resources/frightened.png&quot;));</span>
<span class="nc" id="L97">    }</span>


    public void check(){
<span class="pc bpc" id="L101" title="2 of 4 branches missed.">      if(this.win || this.gameOver){</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">        if(this.count &gt; 10){</span>
<span class="nc" id="L103">          this.win = false;</span>
<span class="nc" id="L104">          this.gameOver = false;</span>
<span class="nc" id="L105">          setup();</span>
        }

      }
<span class="fc" id="L109">    }</span>

    public void settings() {
<span class="fc" id="L112">        size(WIDTH, HEIGHT);</span>
<span class="fc" id="L113">        check();</span>
<span class="fc" id="L114">    }</span>

    public void draw() {
<span class="nc bnc" id="L117" title="All 2 branches missed.">        if(this.gameOver){</span>
<span class="nc" id="L118">          background(0, 0, 0);</span>
<span class="nc" id="L119">          fill(000000);</span>
<span class="nc" id="L120">          rect(-1, -1, WIDTH + 1, HEIGHT +1);</span>
<span class="nc" id="L121">          font = createFont(&quot;PressStart2P-Regular.ttf&quot;, 32);</span>
<span class="nc" id="L122">          fill(255, 255, 255);</span>
<span class="nc" id="L123">          textFont(font);</span>
<span class="nc" id="L124">          text(&quot;GAME OVER&quot;, 100, 240 );</span>
<span class="nc" id="L125">          this.count+=1;</span>
        }
<span class="nc bnc" id="L127" title="All 2 branches missed.">        else if(this.win){</span>
<span class="nc" id="L128">          background(0, 0, 0);</span>
<span class="nc" id="L129">          fill(000000);</span>
<span class="nc" id="L130">          rect(-1, -1, WIDTH + 1, HEIGHT +1);</span>
<span class="nc" id="L131">          font = createFont(&quot;PressStart2P-Regular.ttf&quot;, 32);</span>
<span class="nc" id="L132">          fill(255, 255, 255);</span>
<span class="nc" id="L133">          textFont(font);</span>
<span class="nc" id="L134">          text(&quot;YOU WIN&quot;, 150, 300 );</span>
<span class="nc" id="L135">          this.count+=1;</span>
        }
        else{

<span class="nc" id="L139">          background(0, 0, 0);</span>
<span class="nc" id="L140">          fill(000000);</span>
<span class="nc" id="L141">          this.rect(-1, -1, WIDTH + 1, HEIGHT +1);</span>
<span class="nc" id="L142">          this.settings.draw(this);</span>
<span class="nc" id="L143">          this.player.tick();</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">          if(settings.stepCell(this.player.getX(), this.player.getY(), this.player.getDirection())==0){</span>
<span class="nc" id="L145">            this.win = true;</span>
            }
<span class="nc" id="L147">          this.player.checkQ();</span>
<span class="nc" id="L148">          this.player.step(settings.nextCell(this.player.getX(), this.player.getY(), this.player.getDirection()));</span>

<span class="nc" id="L150">          this.player.draw(this);</span>
<span class="nc" id="L151">          this.ambusher.tick(this.player.getX(), this.player.getY(), this.player.getDirection(), this.settings.getFright());</span>
<span class="nc" id="L152">          this.ambusher.step(settings.nextCell(this.ambusher.getX(), this.ambusher.getY(), this.ambusher.getDirection()));</span>
<span class="nc" id="L153">          this.ambusher.draw(this);</span>
<span class="nc" id="L154">          this.chaser.tick(this.player.getX(), this.player.getY(), this.player.getDirection(), this.settings.getFright());</span>
<span class="nc" id="L155">          this.chaser.draw(this);</span>
<span class="nc" id="L156">          this.ignorant.tick(this.player.getX(), this.player.getY(), this.chaser.getX(), this.chaser.getY(), this.player.getDirection(), this.settings.getFright());</span>
<span class="nc" id="L157">          this.ignorant.draw(this);</span>
<span class="nc" id="L158">          this.whim.tick(this.player.getX(), this.player.getY(), this.chaser.getX(), this.chaser.getY(), this.player.getDirection(), this.settings.getFright());</span>
<span class="nc" id="L159">          this.whim.draw(this);</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">          if(this.player.ghostStep(this.ambusher.getX(), this.ambusher.getY())){</span>
<span class="nc bnc" id="L161" title="All 2 branches missed.">            if(!(settings.getFright())){</span>
<span class="nc" id="L162">              this.player.collide();</span>
<span class="nc" id="L163">              this.ambusher.restart();</span>
<span class="nc" id="L164">              this.chaser.restart();</span>
<span class="nc" id="L165">              this.whim.restart();</span>
<span class="nc" id="L166">              this.ignorant.restart();</span>
<span class="nc bnc" id="L167" title="All 2 branches missed.">              if(this.settings.removeLife()){</span>
<span class="nc" id="L168">                this.gameOver = true;</span>
              }
            }
          }
<span class="nc bnc" id="L172" title="All 2 branches missed.">          else if(this.player.ghostStep(this.chaser.getX(), this.chaser.getY())){</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">            if(!(settings.getFright())){</span>
<span class="nc" id="L174">              this.player.collide();</span>
<span class="nc" id="L175">              this.ambusher.restart();</span>
<span class="nc" id="L176">              this.chaser.restart();</span>
<span class="nc" id="L177">              this.whim.restart();</span>
<span class="nc" id="L178">              this.ignorant.restart();</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">              if(this.settings.removeLife()){</span>
<span class="nc" id="L180">                this.gameOver = true;</span>
              }
            }

          }
<span class="nc bnc" id="L185" title="All 2 branches missed.">          else if(this.player.ghostStep(this.ignorant.getX(), this.ignorant.getY())){</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">            if(!(settings.getFright())){</span>
<span class="nc" id="L187">              this.player.collide();</span>
<span class="nc" id="L188">              this.ambusher.restart();</span>
<span class="nc" id="L189">              this.chaser.restart();</span>
<span class="nc" id="L190">              this.whim.restart();</span>
<span class="nc" id="L191">              this.ignorant.restart();</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">              if(this.settings.removeLife()){</span>
<span class="nc" id="L193">                this.gameOver = true;</span>

              }
            }
          }
<span class="nc bnc" id="L198" title="All 2 branches missed.">          else if(this.player.ghostStep(this.whim.getX(), this.whim.getY())){</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">            if(!(settings.getFright())){</span>
<span class="nc" id="L200">              this.player.collide();</span>
<span class="nc" id="L201">              this.ambusher.restart();</span>
<span class="nc" id="L202">              this.chaser.restart();</span>
<span class="nc" id="L203">              this.whim.restart();</span>
<span class="nc" id="L204">              this.ignorant.restart();</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">              if(this.settings.removeLife()){</span>
<span class="nc" id="L206">                this.gameOver = true;</span>
              }
            }
          }
<span class="nc bnc" id="L210" title="All 2 branches missed.">        if(this.debug%2 == 1){</span>
<span class="nc" id="L211">          stroke(255);</span>
<span class="nc" id="L212">          line(this.player.getX()+8, this.player.getY()+8, this.ambusher.getX()+8, this.ambusher.getY()+8);</span>
<span class="nc" id="L213">          stroke(255);</span>
<span class="nc" id="L214">          line(this.player.getX()+8, this.player.getY()+8, this.chaser.getX()+8, this.chaser.getY()+8);</span>
<span class="nc" id="L215">          stroke(255);</span>
<span class="nc" id="L216">          line(this.player.getX()+8, this.player.getY()+8, this.ignorant.getX()+8, this.ignorant.getY()+8);</span>
<span class="nc" id="L217">          stroke(255);</span>
<span class="nc" id="L218">          line(this.player.getX()+8, this.player.getY()+8, this.whim.getX()+8, this.whim.getY()+8);</span>
        }
        }

        // rect( this.ambusher.getX()+2, this.ambusher.getY()+2, 16, 16 );
        // rect( this.player.getX()+4, this.player.getY()-4, 16, 16 );

<span class="nc" id="L225">    }</span>
//|| this.player.ghostStep(this.chaser.getX(), this.chaser.getY()) ||this.player.ghostStep(this.ignorant.getX(), this.ignorant.getY()) || this.player.ghostStep(this.whim.getX(), this.whim.getY())){

    public void keyPressed(){

<span class="nc bnc" id="L230" title="All 4 branches missed.">      if(key == CODED &amp;&amp; keyCode == UP ){</span>
<span class="nc bnc" id="L231" title="All 2 branches missed.">        if(!(this.settings.nextCell(this.player.getX(), this.player.getY()-16, &quot;u&quot;))){</span>
<span class="nc" id="L232">          this.player.move(&quot;u&quot;);</span>
        }
        else{
<span class="nc" id="L235">          this.player.queue(&quot;u&quot;);</span>
        }
      }
<span class="nc bnc" id="L238" title="All 4 branches missed.">      if(key == CODED &amp;&amp; keyCode == DOWN ){</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">        if(!(this.settings.nextCell(this.player.getX(), this.player.getY()+16, &quot;d&quot;))){</span>
<span class="nc" id="L240">          this.player.move(&quot;d&quot;);</span>
        }
        else{
<span class="nc" id="L243">          this.player.queue(&quot;d&quot;);</span>
        }
      }
<span class="nc bnc" id="L246" title="All 4 branches missed.">      if(key == CODED &amp;&amp; keyCode == LEFT ){</span>
<span class="nc bnc" id="L247" title="All 2 branches missed.">        if(!(this.settings.nextCell(this.player.getX()-16, this.player.getY(), &quot;l&quot;))){</span>
<span class="nc" id="L248">          this.player.move(&quot;l&quot;);</span>
        }
        else{
<span class="nc" id="L251">          this.player.queue(&quot;l&quot;);</span>
        }
      }
<span class="nc bnc" id="L254" title="All 4 branches missed.">      if(key == CODED &amp;&amp; keyCode == RIGHT ){</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">        if(!(this.settings.nextCell(this.player.getX()+16, this.player.getY(), &quot;r&quot;))){</span>
<span class="nc" id="L256">          this.player.move(&quot;r&quot;);</span>
        }
        else{
<span class="nc" id="L259">          this.player.queue(&quot;r&quot;);</span>
        }

      }
<span class="nc bnc" id="L263" title="All 2 branches missed.">      if( key == ' '){</span>
<span class="nc" id="L264">        this.debug +=1;</span>
      }
<span class="nc" id="L266">    }</span>


    public static void main(String[] args) {
<span class="nc" id="L270">        PApplet.main(&quot;ghost.App&quot;);</span>

<span class="nc" id="L272">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>